---
title: "동시성 제어 이슈"
subtitle: "Wanted pre-onboading"
date: "2023.06.22"
---

동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발할 수 있을까?
- Locking 방식을 사용하거나, 캐시 및 동시성 제어를 할 수 있다.

짧은 시간 내 사용자들이 동시에 동일한 DB 테이블행을 업데이트하는 경우, 여러 사용자가 동시에 업데이트를 수행하면 데이터가 충동하는 등 예상치 못한 결과가 발생할 수 있다. 
- 첫째로 데이터 일관성(Consistency)에 문제가 생길 수 있다. 데이터 베이스에 저장된 데이터는 일정한 규칙과 제약조건을 준수할 때 일관성을 유지할 수 있다. 
- 데이터 무결성(Integrity)이 깨질 수 있다. 데이터 정확성과 유효성에 문제가 생겨 데이터가 불완전해져서 값이나 형식에 문제가 생길 수 있다. 데이터에 대한 신뢰성이 하락할 수 있는 것이다.

이 경우 DB 운용시 이런 요구에 부합하기 위하여 일반적으로 낙관적 락(Optimistic Locking)을 고려해볼 수 있다. 
- 낙관적 락은 데이터 갱신이 충돌이 발생하지 않을 것이라고 가정한다. 특정 데이터에 대한 경쟁을 낙관적으로 바라보는 것이다. 이 경우 자원에 lock을 걸어 선점하지 말고, 커밋 시에 문제가 발생하면 그때 처리하자는 방식이다.